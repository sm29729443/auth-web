<!-- 會員註冊表單 -->
<div class="max-w-2xl mx-auto">
    <!-- 表單卡片 -->
    <div class="bg-white rounded-lg shadow-sm border border-gray-200">
        <div class="bg-gradient-to-r from-blue-50 to-blue-100 px-6 py-4 border-b border-gray-200">
            <h2 class="text-lg font-semibold text-gray-800">會員資料</h2>
        </div>
    </div>

    <!-- 表單內容 -->
    <form [formGroup]="registerForm" class="p-6 space-y-6"  (submit)="onSubmit()">
        <!-- 姓名 -->
        <div class="form-group">
            <mat-form-field appearance="fill" class="w-full">
                <mat-label>姓名 <span class="text-red-500">*</span></mat-label>
                <input matInput formControlName="name" placeholder="請輸入您的姓名" maxlength="10">
                @if (registerForm.get('name')?.invalid && registerForm.get('name')?.touched) {
                <mat-error>{{ getFieldErrorMessage('name') }}</mat-error>
                }
            </mat-form-field>
        </div>
        <!-- 身份證字號 -->
        <div class="form-group">
            <mat-form-field appearance="fill" class="w-full">
                <mat-label>身份證字號</mat-label>
                <input matInput formControlName="idNumber" placeholder="請輸入身份證字號" maxlength="10" class="uppercase">
                @if (registerForm.get('idNumber')?.invalid && registerForm.get('idNumber')?.touched) {
                <mat-error>{{ getFieldErrorMessage('idNumber') }}</mat-error>
                }
            </mat-form-field>
        </div>
        <!-- 生日 -->
        <div class="form-group">
            <label class="block text-sm font-medium text-gray-700 mb-3">
                生日 <span class="text-red-500">*</span>
            </label>
            <div class="grid grid-cols-3 gap-4">
                <mat-form-field appearance="fill" class="w-full">
                    <mat-label style="border: none; border-color: red;">生日 <span class="text-red-500">*</span></mat-label>
                    <input matInput 
                    [matDatepicker]="picker" 
                    formControlName="birthDate" 
                    placeholder="選擇生日" 
                    [max]="maxDate"
                    [min]="minDate"
                    readonly
                    >
                    <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                    <mat-datepicker #picker></mat-datepicker>
                    @if (registerForm.get('birthDate')?.invalid && registerForm.get('birthDate')?.touched) {
                    <mat-error>{{ getFieldErrorMessage('birthDate') }}</mat-error>
                    }
                </mat-form-field>
            </div>
            <div class="text-sm text-gray-500 mt-1">
                ※要求保險人滿18歲方可註冊為會員
            </div>
        </div>

      <!-- 手機號碼 -->
      <div class="form-group">
        <mat-form-field appearance="fill" class="w-full">
          <mat-label>手機號碼 <span class="text-red-500">*</span></mat-label>
          <input 
            matInput 
            type="tel"
            formControlName="phone" 
            placeholder="請輸入手機號碼"
            maxlength="10"
          >
          @if (registerForm.get('phone')?.invalid && registerForm.get('phone')?.touched) {
            <mat-error>{{ getFieldErrorMessage('phone') }}</mat-error>
          }
        </mat-form-field>
      </div>

      <!-- 按鈕區域 -->
      <div class="flex justify-center space-x-4 pt-6 border-t border-gray-200">
        <button 
          mat-stroked-button 
          type="button"
          (click)="resetForm()"
          [disabled]="authService.isLoading()"
          class="px-8 py-2"
        >
          重置
        </button>
        
        <button 
          mat-raised-button 
          color="primary"
          type="submit"
          [disabled]="authService.isLoading()"
          class="px-8 py-2"
        >
          @if (authService.isLoading()) {
            <span class="flex items-center">
              <mat-icon class="animate-spin mr-2">refresh</mat-icon>
              發送中...
            </span>
          } @else {
            下一步
          }
        </button>
      </div>
    </form>

</div>